(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();let d=[];const v=100;let m=!1,f=!1,p="/",g=0;function B(i){i?document.getElementById("filerobotOpenModalBtn").classList.add("hidden"):document.getElementById("filerobotOpenModalBtn").classList.remove("hidden")}function E(i){const l=i.length;if(l>0){const a=250*Math.ceil(l/6);CustomElement.setHeight(a)}else CustomElement.setHeight(v)}function y(i){const l=i.file.url.cdn,r=document.createElement("div");if(r.classList="rounded p-2 border shadow relative removeItemParent",r.setAttribute("data-uuid",i.file.uuid),i.file.type.split("/")[0]=="image"){const o=document.createElement("img");o.src=l+"&width=200&height=200",o.classList="w-32 h-32 mx-auto rounded",r.appendChild(o)}else{const o=document.createElement("div");o.innerHTML=i.file.type,o.classList="w-32 h-32 mx-auto rounded",r.appendChild(o)}const e=document.createElement("div");e.classList="absolute right-0 top-0 cursor-pointer";const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.innerHTML=`
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z" clip-rule="evenodd" />
                `,t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("fill","currentColor"),t.classList="w-6 h-6 text-red-500 hover:text-red-900 removeItem",e.appendChild(t),r.appendChild(e),document.getElementById("filerobotImages").appendChild(r)}function L(){document.getElementById("message").innerText="Please provide a token and secure template",document.getElementById("messageWrapper").classList.remove("hidden"),document.getElementById("filerobotOpenModalBtn").classList.add("hidden")}document.addEventListener("DOMContentLoaded",function(){function i(){const e=window.Filerobot;if(m&&f&&p){const t=e.Core({securityTemplateID:f,container:m,dev:!1}),o=e.Explorer,s=e.XHRUpload;t.use(o,{config:{rootFolderPath:p},target:"#filerobotWidget",inline:!0,inline:!0,width:"100%",height:"100%",resetAfterClose:!0,disableExportButton:!1,hideExportButtonIcon:!0,preventExportDefaultBehavior:!0,disableDownloadButton:!1,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,noImgOperationsAndDownload:!0,hideDownloadTransformationOption:!0,disableFileResolutionFallback:!0,showFoldersTree:!1,defaultFieldKeyOfBulkEditPanel:"title",locale:{strings:{mutualizedExportButtonLabel:"Insert",mutualizedDownloadButton:"Insert"}}}).use(s).on("export",function(n,c,b,w){E(n),n.forEach((u,I)=>{if(d.findIndex(h=>h.file.uuid===u.file.uuid)===-1){const h={file:{uuid:u.file.uuid,url:{cdn:u.file.url.cdn},type:u.file.type}};d.push(h),y(u)}}),n.length>0&&(document.getElementById("filerobotOpenModalBtn").classList.add("hidden"),g=n.length),l(),CustomElement.setValue(JSON.stringify(d))})}}CustomElement.init((e,t)=>{const o=e.value,s=JSON.parse(o),n=e.config;if(n&&(m=n.token?n.token:!1,f=n.secTemplate?n.secTemplate:!1,p=n.rootPath?n.rootPath:p,m&&f)){s?d=s.filter(function(c){return c.hasOwnProperty("file")}):d=[],d.length>0?(document.getElementById("filerobotOpenModalBtn").classList.add("hidden"),s.forEach(function(c,b){y(c)}),g=s.length,E(s)):CustomElement.setHeight(v),CustomElement.onDisabledChanged(B),i();return}L()});function l(e){document.getElementById("filerobotWidgetWrapper").classList.add("hidden")}const r=document.getElementById("filerobotOpenModalBtn"),a=document.getElementById("filerobotCloseModalBtn");r.addEventListener("click",function(){CustomElement.setHeight(650),document.getElementById("filerobotWidgetWrapper").classList.remove("hidden")}),a.addEventListener("click",function(){l(),E(d)}),document.getElementById("filerobotImages").addEventListener("click",function(e){if(e.target.classList.contains("removeItem")||e.target.closest(".removeItem")){const t=e.target.closest(".removeItemParent"),o=t.getAttribute("data-uuid"),s=d.filter(n=>n.file.uuid!==o);d=s,CustomElement.setValue(JSON.stringify(s)),g-=1,g==0&&document.getElementById("filerobotOpenModalBtn").classList.remove("hidden"),t.remove()}})});
